{% extends "layout.html" %}
{% block content %}
<div class="mdc-card">
  <div class="card-content">
    <h2 class="title is-4 mb-4">Settings</h2>
    <form id="settingsForm">
      <h3 class="title is-5 mb-2">Appearance</h3>
      <div class="field mb-4">
        <label class="label" for="darkMode">Dark Mode</label>
        <input type="checkbox" id="darkMode" class="switch">
      </div>
      <div class="buttons">
        <button type="submit" class="mdc-button mdc-button--raised">Save</button>
        <button type="button" id="resetBtn" class="mdc-button">Reset</button>
      </div>
    </form>
  </div>
</div>
<script>
  document.addEventListener('DOMContentLoaded', function() {
    const root = document.documentElement;
    const darkInput = document.getElementById('darkMode');
    function load() {
      const dm = localStorage.getItem('ultra-dark') === '1';
      darkInput.checked = dm;
      root.classList.toggle('dark-mode', dm);
    }
    function apply() {
      root.classList.toggle('dark-mode', darkInput.checked);
    }
    load();
    document.getElementById('settingsForm').addEventListener('submit', function(e) {
      e.preventDefault();
      localStorage.setItem('ultra-dark', darkInput.checked ? '1' : '0');
      apply();
    });
    document.getElementById('resetBtn').addEventListener('click', function() {
      localStorage.removeItem('ultra-dark');
      load();
    });
  });
</script>
{% endblock %}
